This directory contains the c++ application source for a rudimentary LeapDDSBridge.

Steps:

Into your working directory, copy the files from this directory.

Determine your arch string (see $NDDSHOME/lib, and use one of the available directory names).  If you are using Visual Studio Express, use i86Win32VS2010 (for example) as your architecture string.  If you have the full Visual Studio, you can use the x64Win64VS* versions.

Call rtiddsgen to generate the Type files:

% rtiddsgen -language c++ -inputIdl LeapTypes.idl -ppDisable -replace -example <arch>

This will generate all the necessary Type, TypeSupport and strongly typed writers necessary in the bridge code.



The LeapDDSBridge.cxx file includes several #defines which can be used to reduce the noise level.  You can undef pointables, hands and/or gestures, and also prevent the repeating information to the console about counts and frame rates.  




For Windows:

Open the generated .sln and delete one of the projects, for example the Subscriber project.  
Change the name of the remaining project to "LeapDDSBridge" (or as desired).
Replace the LeapTypes_publisher.cxx file in the Source Files folder with the LeapDDSBridge.cxx file from this directory.
Right-click the LeapDDSBridge project and change the properties:
    Configuration:  All Configurations
    C/C++:
        General: Additional Include Directories:  Add the location of the Leap include directory
    Linker:
        General: Output File:  Change to .\objs\<arch>\LeapDDSBridge.exe
        General: Additional Library Directories:  Add the Leap Motion SDK lib\<archname> directory (like: lib\x86)
        Input:  Additional Dependencies:  Add leap.lib (or leapd.lib) to the list
        Debugging: Generate Program Database File:  change to .\objs\<arch>\LeapDDSBridge.pdb

And build.

For MacOS (Darwin):

Edit the included makefile_x64Darwin12clang4.1 from this directory to match your environment.  The makefile assumes that NDDSHOME is already set externally. You will need to set the internal LEAPHOME variable for your environment.  The rtiddsgen generated makefile_LeapTypes_x64Darwin12clang4.1 does not have the necessary Leap information.  It will only compile the autogenerated files.

Build and install:

% make -f makefile_x86Darwin12clang4.1
...
% make -f makefile_x86Darwin12clang4.1 install
...
%

To run the new bridge, you may need to set your DYLIB_LIBRARY_PATH to include the location of the libLeap.dylib dynamic library:

If the Leap dynamic libraries are installed at /opt/leap/lib, then:

(for bash)
export DYLIB_LIBRARY_PATH=$DYLIB_LIBRARY_PATH:/opt/leap/lib 

On some MacOS Systems, there is an insufficent number of shared memory resources/existing resources are too small, to enable use of the shmem transport.  If you get "failed to initialize shared memory resource segment for key ..." messages and a create_participant error, see http://community.rti.com/kb/rti-connext-dds-510-shared-memory-issues-running-applications-mac-os-x


